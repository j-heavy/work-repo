(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,a,t){"use strict";var n=t(11),r=t(36),s={isLogin:"true"==window.localStorage.getItem("isLogin")},o=t(37),m=t.n(o),c=t(38),l=t(42);t.d(a,"a",function(){return p});var i=Object(n.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN":return Object(r.a)({},e,{isLogin:a.payload});default:return e}}}),u=Object(l.a)(),f=[m.a,c.a,u],p=Object(n.e)(i,n.a.apply(void 0,f));p.subscribe(function(){localStorage.setItem("isLogin",JSON.stringify(p.getState().login.isLogin))})},41:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFISURBVHgBrZXBVcMwDIalJO/hY9igjNAN6Aa9lZ7Am7BJHqfkRjcInYAR8Ab4GPoeEZbT9tk82xC3/yGJEuWzLMk2gqN63dQgoHbf6U4qyBBa4EO7QILGPN4HfBR9DUu9kxpmqJgu9ByBWs2FsiqePhE+skFUPEEx7j2PYZgNtWAQogY6Wodxr3db9Z8fOaDUTArIFN6I99tN+8H1uRrYds8kLnofgmeBOQWEsDKPKgbPToXutioFr1I/hxaMrwHou5JYVq8OfMWDJsFcINMxi5QPlJ41wdfNskhGmymuQZX6aG53sXYCP0pOBQdyyns6x3aALr5gnD3mDD35Z3fFEdpzxL+hF4FT0GywU9gglPVnjkM6FzaxESF/NP36yQaNo4Ty8OZBLjpBNm2P8Y0+/wQxeElILzGnnBMEXWPaG4S/4swJkgP+AaFMo0Di/NHJAAAAAElFTkSuQmCC"},43:function(e,a,t){"use strict";var n,r=t(0),s=t.n(r),o=t(9),m=t(5),c=t(10),l=t(13),i=t(14),u=t(16),f=t(15),p=t(17),d=t(12),h=t.n(d),g=t(18),_=function(e){return{type:"LOGIN",payload:e}},A=function(e){var a=e.error;return s.a.createElement("div",null,s.a.createElement("span",{className:a?"form_text form_text__warning form_text__error":"form_text form_text__warning form_text__error hide"},"wrond user data"))},E=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(f.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",password:"",error:!1},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(c.a)({},n,r))},t.handleSubmit=function(e){e.preventDefault(),t.fetch(t.state.username,t.state.password),t.setState({password:""})},t}return Object(p.a)(a,e),Object(i.a)(a,[{key:"fetch",value:function(e,a){var t=this;h()({method:"post",url:"http://emphasoft-test-assignment.herokuapp.com/api-token-auth/",data:{username:e,password:a}}).then(function(e){console.log(e),localStorage.setItem("username",t.state.username),t.props.login(!0)},function(e){console.log(e),t.setState({error:!0}),t.props.login(!1),t.forceUpdate()})}},{key:"render",value:function(){var e=this.state,a=e.username,t=e.password,n=e.error;return s.a.createElement("div",{className:"auth_container centered"},s.a.createElement("div",{className:"auth centered"},s.a.createElement("h1",{className:"header"},"authorization"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form_container"},s.a.createElement("label",{className:n?"form_text form_text__warning":"form_text"},"username:"),s.a.createElement("input",{className:n?"form_input form_input__warning":"form_input",type:"username",name:"username",onChange:this.handleChange,value:a})),s.a.createElement("div",{className:"form_container form_margin"},s.a.createElement("label",{className:n?"form_text form_text__warning":"form_text"},"password:"),s.a.createElement("input",{className:n?"form_input form_input__warning":"form_input",name:"password",type:"password",onChange:this.handleChange,value:t})),s.a.createElement(A,{error:n}),s.a.createElement("div",{className:"button_container"},s.a.createElement("button",{className:"button"},s.a.createElement("span",{className:"button_text"},"Login"))),s.a.createElement("button",{className:"button"},s.a.createElement("span",{className:"button_text"},s.a.createElement(g.b,{to:"/reg"},"Registration"))))))}}]),a}(s.a.Component),N=Object(m.b)(null,function(e){return{login:function(a){return e(_(a))}}})(E),b=t(41),v=t.n(b),w=Object(m.b)(null,function(e){return{login:function(a){return e(_(a))}}})(Object(o.e)(function(e){var a=e.history,t=e.login;return s.a.createElement("div",{className:"logout",onClick:function(){t(!1),window.localStorage.clear(),a.push("/")}},s.a.createElement("div",{className:"logout_container"},s.a.createElement("span",{className:"logout_text"},"Log out"),s.a.createElement("img",{src:v.a,className:"logout_icon"})))})),x=(t(78),window.localStorage.getItem("username")),y=function(e){var a,t=e.error,n=e.message;return n.password&&(a="8+ characters, 1 capital, 1 numeric"),s.a.createElement("span",{className:t?"form_text form_text__warning form_text__error":"form_text form_text__warning form_text__error hide"},a||n.username||"wrong user data")},C=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(f.a)(a)).call.apply(e,[this].concat(r)))).state={username:x||"",password:"",firstName:"",lastName:"",error:!1,messageError:{password:"",username:""}},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(c.a)({},n,r))},t.handleSubmit=function(e){e.preventDefault(),t.fetch(t.state.username,t.firstName,t.lastName,t.state.password),t.setState({password:""})},t}return Object(p.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getID()}},{key:"getID",value:function(){var e,a=this;h.a.request({method:"GET",url:"http://emphasoft-test-assignment.herokuapp.com/api/v1/users/",headers:{"content-type":"application/json",authorization:"Token 781bd9f1de084f4daa7ba2aa8a71a2eab855354e"}}).then(function(a){console.log(a.data),e=a.data}).catch(function(e){console.log(e.response.data)}).finally(function(t){for(var r=0;r<e.length;r++)console.log(e[r].username),e[r].username===x&&(a.setState({firstName:e[r].first_name,lastName:e[r].last_name}),n=e[r].id)})}},{key:"fetch",value:function(e,a,t,r){var s,o=this;console.log("http://emphasoft-test-assignment.herokuapp.com/api/v1/users/".concat(n,"/")),s=r?{username:e,first_name:a,last_name:t,password:r}:{username:e,first_name:a,last_name:t};var m={method:"PATCH",url:"http://emphasoft-test-assignment.herokuapp.com/api/v1/users/".concat(n,"/"),data:s,headers:{"content-type":"application/json",authorization:"Token 781bd9f1de084f4daa7ba2aa8a71a2eab855354e"}};h.a.request(m).then(function(e){alert("succesful!")}).catch(function(e){console.log(e.response.data),o.setState({messageError:e.response.data,error:!0}),o.forceUpdate()})}},{key:"render",value:function(){var e=this.state,a=e.username,t=e.firstName,n=e.lastName,r=e.password,o=e.error,m=e.messageError;return s.a.createElement("div",{className:"auth_container centered"},s.a.createElement("div",{className:"auth centered"},s.a.createElement(w,null),s.a.createElement("h1",{className:"header"},"Edit profile"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form_container"},s.a.createElement("label",{className:"form_text"},"username:"),s.a.createElement("input",{className:"form_input",type:"username",name:"username","aria-describedby":"emailHelp",onChange:this.handleChange,value:a})),s.a.createElement("div",{className:"form_container"},s.a.createElement("label",{className:"form_text"},"first name:"),s.a.createElement("input",{className:"form_input",type:"firstName",name:"firstName","aria-describedby":"emailHelp",onChange:this.handleChange,value:t})),s.a.createElement("div",{className:"form_container"},s.a.createElement("label",{className:"form_text"},"last name:"),s.a.createElement("input",{className:"form_input",type:"lastName",name:"lastName","aria-describedby":"emailHelp",onChange:this.handleChange,value:n})),s.a.createElement("div",{className:"form_container form_margin"},s.a.createElement("label",{className:o?"form_text form_text__warning":"form_text"},"password:"),s.a.createElement("input",{className:o?"form_input form_input__warning":"form_input",name:"password",type:"password",onChange:this.handleChange,value:r})),s.a.createElement(y,{error:o,message:m}),s.a.createElement("div",{className:"button_container"},s.a.createElement("button",{className:"button"},s.a.createElement("span",{className:"button_text"},"Edit"))))))}}]),a}(s.a.Component),O=Object(m.b)(null,function(e){return{login:function(a){return e(_(a))}}})(C),j=function(e){var a,t=e.error,n=e.message;return n.password&&(a="8+ characters, 1 capital, 1 numeric"),s.a.createElement("span",{className:t?"form_text form_text__warning form_text__error":"form_text form_text__warning form_text__error hide"},a||n.username||"wrong user data")},S=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(f.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",password:"",firstName:"",lastName:"",error:!1,messageError:{password:"",username:""}},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(c.a)({},n,r))},t.handleSubmit=function(e){e.preventDefault(),t.fetch(t.state.username,t.firstName,t.lastName,t.state.password),t.setState({password:""})},t}return Object(p.a)(a,e),Object(i.a)(a,[{key:"fetch",value:function(e,a,t,n){var r=this,s={method:"POST",url:"http://emphasoft-test-assignment.herokuapp.com/api/v1/users/",data:{username:e,first_name:a,last_name:t,password:n,is_active:!0},headers:{"content-type":"application/json",authorization:"Token 781bd9f1de084f4daa7ba2aa8a71a2eab855354e"}};h.a.request(s).then(function(e){localStorage.setItem("username",e.data.username),r.props.login(!0)}).catch(function(e){console.log(e.response.data),r.props.login(!1),r.setState({messageError:e.response.data,error:!0}),r.forceUpdate()})}},{key:"render",value:function(){var e=this.state,a=e.username,t=e.firstName,n=e.lastName,r=e.password,o=e.error,m=e.messageError;return s.a.createElement("div",{className:"auth_container centered"},s.a.createElement("div",{className:"auth centered"},s.a.createElement("h1",{className:"header"},"registration"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form_container"},s.a.createElement("label",{className:"form_text"},"username:"),s.a.createElement("input",{className:"form_input",type:"username",name:"username","aria-describedby":"emailHelp",onChange:this.handleChange,value:a})),s.a.createElement("div",{className:"form_container"},s.a.createElement("label",{className:"form_text"},"first name:"),s.a.createElement("input",{className:"form_input",type:"firstName",name:"firstName","aria-describedby":"emailHelp",onChange:this.handleChange,value:t})),s.a.createElement("div",{className:"form_container"},s.a.createElement("label",{className:"form_text"},"last name:"),s.a.createElement("input",{className:"form_input",type:"lastName",name:"lastName","aria-describedby":"emailHelp",onChange:this.handleChange,value:n})),s.a.createElement("div",{className:"form_container form_margin"},s.a.createElement("label",{className:o?"form_text form_text__warning":"form_text"},"password:"),s.a.createElement("input",{className:o?"form_input form_input__warning":"form_input",name:"password",type:"password",onChange:this.handleChange,value:r})),s.a.createElement(j,{error:o,message:m}),s.a.createElement("div",{className:"button_container"},s.a.createElement("button",{className:"button"},s.a.createElement("span",{className:"button_text"},"Login"))))))}}]),a}(s.a.Component),k=Object(m.b)(null,function(e){return{login:function(a){return e(_(a))}}})(S);a.a=Object(m.b)(function(e){return{isLogin:e.login.isLogin}})(function(e){var a=e.isLogin;return s.a.createElement(o.c,null,a?s.a.createElement(o.a,{path:"/",render:function(){return s.a.createElement(O,null)}}):s.a.createElement(o.a,{exact:!0,path:"/",render:function(){return s.a.createElement(N,null)}}),s.a.createElement(o.a,{exact:!0,path:"/reg",render:function(){return s.a.createElement(k,null)}}))})},44:function(e,a,t){e.exports=t(45)},45:function(e,a,t){"use strict";t.r(a),function(e){var a=t(0),n=t.n(a),r=t(34),s=t(5),o=t(18),m=t(23),c=t(43),l=(t(79),t(80),document.querySelector(".root"));e.state=m.a,Object(r.render)(n.a.createElement(s.a,{store:m.a},n.a.createElement(o.a,null,n.a.createElement(c.a,null))),l)}.call(this,t(21))},78:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAUCAYAAABbLMdoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAChSURBVHgBjdBtDYMwEAbgHpkAJGBhEiqj6Y9ZmIPNwhzsX2UgARxQCShouIOD8NXrvclRIM+bNoUQwmCWWOdcNEIqXhucFotNCVucqCkAPRi0XIi5I8H6oinA/qNUgPNWUuGCpcItzhWyeFfocGqcf2XkvBiOKaWfdIwPLl+G1nvfgxbSf9DCC5bgAZfghjVwxlpIoXt+ayDlgfNEWJcgZQIi1oFQ7QI5YAAAAABJRU5ErkJggg=="},80:function(e,a,t){}},[[44,1,2]]]);
//# sourceMappingURL=main.8cf8625b.chunk.js.map